<!DOCTYPE html><!-- Last Published: Sun Dec 22 2024 15:37:51 GMT+0000 (Coordinated Universal Time) --><html data-wf-domain="www.televault.io" data-wf-page="66e67a4cc40e1bbd3ff60be1" data-wf-site="66e67a4cc40e1bbd3ff60b7c"><head><meta charset="utf-8"/><title>Televault</title><meta content="width=device-width, initial-scale=1" name="viewport"/><link href="https://cdn.prod.website-files.com/66e67a4cc40e1bbd3ff60b7c/css/televaultxyz.webflow.503272f0c.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com" rel="preconnect"/><link href="https://fonts.gstatic.com" rel="preconnect" crossorigin="anonymous"/><script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js" type="text/javascript"></script><script type="text/javascript">WebFont.load({  google: {    families: ["Inter:regular,500,600,700,800"]  }});</script><script type="text/javascript">!function(o,c){var n=c.documentElement,t=" w-mod-";n.className+=t+"js",("ontouchstart"in o||o.DocumentTouch&&c instanceof DocumentTouch)&&(n.className+=t+"touch")}(window,document);</script><link href="https://cdn.prod.website-files.com/66e67a4cc40e1bbd3ff60b7c/66e685047c6fe1d7d02adb04_logo-32.png" rel="shortcut icon" type="image/x-icon"/><link href="https://cdn.prod.website-files.com/66e67a4cc40e1bbd3ff60b7c/66e6850a7c6fe1d7d02ade02_logo-256.png" rel="apple-touch-icon"/><!-- Please keep this css code to improve the font quality-->
<style>
  * {
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}
</style></head><body class="body"><div data-animation="default" data-collapse="medium" data-duration="400" data-easing="ease" data-easing2="ease" role="banner" class="navbar w-nav"><div class="container w-container"><a href="javascript:void(0)" class="brand w-nav-brand"><img src="https://cdn.prod.website-files.com/66e67a4cc40e1bbd3ff60b7c/66e7ededea3a5299026b6d21_Televault%20Full%20Logo%20White%20Small.png" loading="lazy" alt="Televault logo" class="image"/></a><nav role="navigation" class="w-nav-menu"><a href="index.html" aria-current="page" class="nav-link w-nav-link w--current">Bridge</a><a href="redeem.html" class="nav-link-2 w-nav-link">Redeem</a><a href="https://sol.televault.io" target="_blank" class="nav-link-3 w-nav-link">Solana</a><a href="https://docs.televault.xyz/" target="_blank" class="nav-link-3 w-nav-link">Docs</a><a id="btn-connect" href="javascript:void(0)" class="button-nav w-button">Connect Wallet</a></nav><div class="w-nav-button"><div class="w-icon-nav-menu"></div></div></div></div><div class="global-styles w-embed"><style>

/* Snippet gets rid of top margin on first element in any rich text*/
.w-richtext>:first-child {
	margin-top: 0;
}

/* Snippet gets rid of bottom margin on last element in any rich text*/
.w-richtext>:last-child, .w-richtext ol li:last-child, .w-richtext ul li:last-child {
	margin-bottom: 0;
}

/* Snippet prevents all click and hover interaction with an element */
.clickable-off {
	pointer-events: none;
}

/* Snippet enables all click and hover interaction with an element */
.clickable-on{
  pointer-events: auto;
}

/* Snippet enables you to add class of div-square which creates and maintains a 1:1 dimension of a div.*/
.div-square::after {
	content: "";
	display: block;
	padding-bottom: 100%;
}

/*Hide focus outline for main content element*/
main:focus-visible {
	outline: -webkit-focus-ring-color auto 0px;
}

/* Make sure containers never lose their center alignment*/
.container-medium, .container-small, .container-large {
	margin-right: auto !important;
	margin-left: auto !important;
}

/*Reset buttons, and links styles*/
a {
	color: inherit;
	text-decoration: inherit;
	font-size: inherit;
}

/*Apply "..." after 3 lines of text */
.text-style-3lines {
	display: -webkit-box;
	overflow: hidden;
	-webkit-line-clamp: 3;
	-webkit-box-orient: vertical;
}

/*Apply "..." after 2 lines of text */
.text-style-2lines {
	display: -webkit-box;
	overflow: hidden;
	-webkit-line-clamp: 2;
	-webkit-box-orient: vertical;
}

</style></div><main class="main-wrapper"><div class="section-home-hero"><div class="page-padding"><div class="container-medium"><div class="home-hero_component"><div class="home-hero-top-wrapper"><div class="max-width-large text-align-center align-center"><h1 class="heading">Bridge Bellscoin to Ethereum</h1><div id="card-vaults" class="vaults-card"><div class="vault-list"><div class="margin-bottom margin-medium"><p class="text-color-grey">STEP 1:Â Select a vault or create a new one</p></div><div id="vault-cards-container" class="w-layout-grid listing-grid"><div id="samplestyle" class="sample-card hide w-node-_74847abd-671f-49fc-d672-ad7a46ca130f-3ff60be1"><img src="https://cdn.prod.website-files.com/66e67a4cc40e1bbd3ff60b7c/66eb811a744e83ec3c8fa347_bell.png" loading="lazy" width="100" alt="A bag of bellscoin" class="image-2"/><h4 id="balance" class="h4">999 BEL</h4><h5 id="balance" class="h5">Heading</h5><h6 id="tokenID" class="h6">Heading</h6></div></div></div><a id="get-vaults" href="javascript:void(0)" class="button w-button">Get Vaults</a><a id="create-vault" href="https://emblem.vision/" target="_blank" class="redeem-button w-button">Create Vault</a><a id="select-vault" href="javascript:void(0)" class="select-button w-button">Select Vault</a></div><section id="card-attest" class="attest-card"><div class="form-div"><div class="margin-bottom margin-medium"><p class="text-color-grey">STEP 2: Create and sign your Attestation</p></div><div class="home-hero-form-wrapper"><div class="form w-form"><form data-name="Email Form" name="email-form" id="form-attest" method="get" class="attest-form" data-wf-page-id="66e67a4cc40e1bbd3ff60be1" data-wf-element-id="b6e50dc8-28ed-e14b-dd14-481d00b3abd2"><div class="margin-small margin-right no-margin-mobile"><label for="" class="field-label">Owner</label></div><input class="text-input w-input" maxlength="256" name="name" data-name="Name" placeholder="" type="text" id="input-owner-attestation"/><div class="margin-small margin-right no-margin-mobile"><label for="" class="field-label">Balance</label></div><input class="text-input w-input" maxlength="256" name="name" data-name="Name" placeholder="" type="text" id="input-balance-attestation"/><div class="margin-small margin-right no-margin-mobile"><label for="" class="field-label">Serial Number</label></div><input class="text-input w-input" maxlength="256" name="name" data-name="Name" placeholder="" type="text" id="input-serial-attestation"/><div class="margin-small margin-right no-margin-mobile"><label for="" class="field-label">Attestation</label></div><textarea placeholder="Signed Attestation" maxlength="5000" id="input-attestation" name="field" data-name="Field" class="textarea w-input"></textarea></form><div class="w-form-done"><div>Thank you! Your submission has been received!</div></div><div class="w-form-fail"><div>Oops! Something went wrong while submitting the form.</div></div></div></div></div><a id="btn-attest" href="javascript:void(0)" class="attest-button w-button">Create Attestation</a></section><div id="card-appraise" class="appraise-card"><div class="form-div"><div class="margin-bottom margin-medium"><p class="text-color-grey">STEP 3: Request for a verified Appraisal</p></div><div class="home-hero-form-wrapper"><div class="form w-form"><form data-name="Email Form" name="email-form" id="form-appraise" method="get" class="appraise-form" data-wf-page-id="66e67a4cc40e1bbd3ff60be1" data-wf-element-id="8c6ec8c0-47a6-f0dd-dcf3-f29d9acae2ea"><div class="margin-small margin-right no-margin-mobile"><label for="" class="field-label">Owner</label></div><input class="text-input w-input" maxlength="256" name="name" data-name="Name" placeholder="" type="text" id="input-owner-appraisal"/><div class="margin-small margin-right no-margin-mobile"><label for="" class="field-label">Balance</label></div><input class="text-input w-input" maxlength="256" name="name" data-name="Name" placeholder="" type="text" id="input-balance-appraisal"/><div class="margin-small margin-right no-margin-mobile"><label for="" class="field-label">Serial Number</label></div><input class="text-input w-input" maxlength="256" name="name" data-name="Name" placeholder="" type="text" id="input-serial-appraisal"/><div class="margin-small margin-right no-margin-mobile"><label for="" class="field-label">Appraisal</label></div><textarea placeholder="Signed Appraisal" maxlength="5000" id="input-appraisal" name="field" data-name="Field" class="textarea w-input"></textarea></form><div class="w-form-done"><div>Thank you! Your submission has been received!</div></div><div class="w-form-fail"><div>Oops! Something went wrong while submitting the form.</div></div></div></div></div><a id="btn-appraise" href="javascript:void(0)" class="appraise-button w-button">Request Appraisal</a></div><div id="card-televault" class="televault-card"><div class="vault-list"><div class="margin-bottom margin-medium"><p class="text-color-grey">STEP 4: Bridge your vaulted BELLS to Ethereum</p></div></div><a id="btn-televault" href="javascript:void(0)" class="televault-button w-button">bridge Bellscoin</a></div><div id="card-complete" class="complete-card"><div class="vault-list"><div class="margin-bottom margin-medium"><p class="text-color-grey">vBELLS is on its way to you!</p><img src="https://cdn.prod.website-files.com/66e67a4cc40e1bbd3ff60b7c/670bd98aeccd37f1aa553a16_BEL%20LOGO.png" loading="lazy" width="150" height="150" alt="Bellscoin Logo" srcset="https://cdn.prod.website-files.com/66e67a4cc40e1bbd3ff60b7c/670bd98aeccd37f1aa553a16_BEL%20LOGO-p-500.png 500w, https://cdn.prod.website-files.com/66e67a4cc40e1bbd3ff60b7c/670bd98aeccd37f1aa553a16_BEL%20LOGO.png 600w" sizes="100vw"/></div></div><a id="btn-add" href="javascript:void(0)" class="button-add w-button">Add Token to Wallet</a><a id="btn-restart" href="index.html" aria-current="page" class="restart-btn w-button w--current">Restart Bridge</a></div></div></div></div></div></div><div class="gradient-wrapper"><div data-w-id="2ba8ccfe-c724-0450-a88f-f9313b0018ac" style="-webkit-transform:translate3d(0, 0, 0) scale3d(1, 1, 1) rotateX(0) rotateY(0) rotateZ(0) skew(0, 0);-moz-transform:translate3d(0, 0, 0) scale3d(1, 1, 1) rotateX(0) rotateY(0) rotateZ(0) skew(0, 0);-ms-transform:translate3d(0, 0, 0) scale3d(1, 1, 1) rotateX(0) rotateY(0) rotateZ(0) skew(0, 0);transform:translate3d(0, 0, 0) scale3d(1, 1, 1) rotateX(0) rotateY(0) rotateZ(0) skew(0, 0)" class="circle _1"></div><div data-w-id="2ba8ccfe-c724-0450-a88f-f9313b0018ad" style="-webkit-transform:translate3d(0, 0, 0) scale3d(1, 1, 1) rotateX(0) rotateY(0) rotateZ(0) skew(0, 0);-moz-transform:translate3d(0, 0, 0) scale3d(1, 1, 1) rotateX(0) rotateY(0) rotateZ(0) skew(0, 0);-ms-transform:translate3d(0, 0, 0) scale3d(1, 1, 1) rotateX(0) rotateY(0) rotateZ(0) skew(0, 0);transform:translate3d(0, 0, 0) scale3d(1, 1, 1) rotateX(0) rotateY(0) rotateZ(0) skew(0, 0)" class="circle _2"></div><div data-w-id="2ba8ccfe-c724-0450-a88f-f9313b0018ae" style="-webkit-transform:translate3d(0, 0, 0) scale3d(1, 1, 1) rotateX(0) rotateY(0) rotateZ(0) skew(0, 0);-moz-transform:translate3d(0, 0, 0) scale3d(1, 1, 1) rotateX(0) rotateY(0) rotateZ(0) skew(0, 0);-ms-transform:translate3d(0, 0, 0) scale3d(1, 1, 1) rotateX(0) rotateY(0) rotateZ(0) skew(0, 0);transform:translate3d(0, 0, 0) scale3d(1, 1, 1) rotateX(0) rotateY(0) rotateZ(0) skew(0, 0)" class="circle _4"></div><div data-w-id="2ba8ccfe-c724-0450-a88f-f9313b0018af" style="-webkit-transform:translate3d(0, 0, 0) scale3d(1, 1, 1) rotateX(0) rotateY(0) rotateZ(0) skew(0, 0);-moz-transform:translate3d(0, 0, 0) scale3d(1, 1, 1) rotateX(0) rotateY(0) rotateZ(0) skew(0, 0);-ms-transform:translate3d(0, 0, 0) scale3d(1, 1, 1) rotateX(0) rotateY(0) rotateZ(0) skew(0, 0);transform:translate3d(0, 0, 0) scale3d(1, 1, 1) rotateX(0) rotateY(0) rotateZ(0) skew(0, 0)" class="circle _3"></div><div data-w-id="e1f076b2-b166-c6db-adf1-3ceefb6a858c" class="amazing-trigger"></div></div></div></main><script src="https://d3e54v103j8qbb.cloudfront.net/js/jquery-3.5.1.min.dc5e7f18c8.js?site=66e67a4cc40e1bbd3ff60b7c" type="text/javascript" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script><script src="https://cdn.prod.website-files.com/66e67a4cc40e1bbd3ff60b7c/js/webflow.efdf08e11f4c84ed5a9e755f1e968f0f.js" type="text/javascript"></script><!-- Adding web3.js-->
<script src="https://cdn.jsdelivr.net/npm/web3@latest/dist/web3.min.js"></script><script src="https://unpkg.com/web3@latest/dist/web3.min.js"></script>
<script>
const web3 = new Web3(window.ethereum);

// Buttons
const walletButton = document.getElementById('btn-connect')
const vaultsButton = document.getElementById('get-vaults')
const createButton = document.getElementById('create-vault')
const selectButton = document.getElementById('select-vault')
const attestButton = document.getElementById('btn-attest')
const appraiseButton = document.getElementById('btn-appraise')
const televaultButton = document.getElementById('btn-televault')
const addWalletButton = document.getElementById('btn-add')
const restartButton = document.getElementById('btn-restart')

// Inputs
const inputOwnerAttest = document.getElementById('input-owner-attestation')
const inputBalanceAttest = document.getElementById('input-balance-attestation')
const inputSerialAttest = document.getElementById('input-serial-attestation')
const inputOwnerAppraise = document.getElementById('input-owner-appraisal')
const inputBalanceAppraise = document.getElementById('input-balance-appraisal')
const inputSerialAppraise = document.getElementById('input-serial-appraisal')
const inputAttestation = document.getElementById('input-attestation')
const inputAppraisal = document.getElementById('input-appraisal')

// Forms
const attestForm = document.getElementById('form-attest')
const appraiseForm = document.getElementById('form-appraise')

// Cards
const cardAttestation = document.getElementById('card-attest')
const cardAppraisal = document.getElementById('card-appraise')
const cardTelevault = document.getElementById('card-televault')
const cardComplete = document.getElementById('card-complete')
const cardContainer = document.getElementById("vault-cards-container")
const gridCards = document.getElementById("grid-cards")

// Variables
let selectedAccount, selectedAddress, selectedTokenId, selectedSerial, balance, coin, prevSerial
let attestR, attestS, attestV, appraiseR, appraiseS, appraiseV

// Input states
inputOwnerAttest.disabled = true;
inputBalanceAttest.disabled = true;
inputSerialAttest.disabled = true;
inputOwnerAppraise.disabled = true;
inputBalanceAppraise.disabled = true;
inputSerialAppraise.disabled = true;
inputAttestation.disabled = true;

// Web3 stuff
const televaultABI = [{"inputs":[{"internalType":"uint256","name":"serialNumber","type":"uint256"},{"internalType":"string","name":"assetId","type":"string"},{"internalType":"uint8","name":"vAttestation","type":"uint8"},{"internalType":"bytes32","name":"rAttestation","type":"bytes32"},{"internalType":"bytes32","name":"sAttestation","type":"bytes32"},{"internalType":"uint8","name":"vAppraisal","type":"uint8"},{"internalType":"bytes32","name":"rAppraisal","type":"bytes32"},{"internalType":"bytes32","name":"sAppraisal","type":"bytes32"}],"name":"televault","outputs":[],"stateMutability":"nonpayable","type":"function"}]
const televaultAddress = '0xAEb36BcD1234eeD847c6B4F9A243C8d47AaF121B';
const televaultContract = new web3.eth.Contract(televaultABI, televaultAddress);

const emblemABI = [{"inputs":[{"internalType":"address","name":"operator","type":"address"},{"internalType":"bool","name":"approved","type":"bool"}],"name":"setApprovalForAll","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"address","name":"operator","type":"address"}],"name":"isApprovedForAll","outputs":[{"internalType":"bool","name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"}]
const emblemAddress = '0x19b094c17F29a16F80bE04cdc0C3e274474C7724';
const emblemContract = new web3.eth.Contract(emblemABI, emblemAddress);

function toggleButton() {
  if (!window.ethereum) {
    loginButton.innerText = 'MetaMask is not installed'
    console.log("No wallet extension found")
	return false
  }

  walletButton.addEventListener('click', connectWallet)
}

async function connectWallet() {
  if (event && event.preventDefault) event.preventDefault();
  const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' })
	.catch((e) => {
	  console.error(e.message)
	  return
	})
  if (!accounts) { return }

  selectedAccount = window.ethereum.selectedAddress
  selectedAddress = web3.utils.toChecksumAddress(selectedAccount)
  var shortAccount = selectedAddress.replace(selectedAddress.substring(6,selectedAddress.length - 4), "...");
  walletButton.innerText = shortAccount
  walletButton.href = "https://etherscan.io/address/" + selectedAddress
  walletButton.target = "_blank"
  walletButton.style.backgroundColor = "white";
  walletButton.style.opacity = 0.8;
  vaultsButton.style.backgroundColor = "orange";
  walletButton.removeEventListener('click', connectWallet)
  vaultsButton.addEventListener('click', getVaults)
}

window.addEventListener('DOMContentLoaded', () => {
    toggleButton()
});

function getVaults() {
    if (event && event.preventDefault) event.preventDefault();
		vaultsButton.removeEventListener('click', getVaults)

    let apiUrl = new URL('https://api.televault.io/');
    
    let request = new XMLHttpRequest();

    let url = apiUrl.toString() + 'vaults/' + selectedAddress;

    request.open('GET', url, true)

    request.onload = function() {
    
        let data = JSON.parse(this.response)
        
        vaultsButton.style.display = 'none';
        
        if (Object.keys(data).length > 0) {
            selectButton.style.display = 'inline-block';
        } else {
            createButton.style.display = 'inline-block';
        }

        if (request.status >= 200 && request.status < 400) {

            cardContainer.style.display = "grid";

            data.forEach(vault => {
              
              if (vault.serialNumber != prevSerial) {

                const style = document.getElementById('samplestyle')
                const card = style.cloneNode(true)

                card.setAttribute('id', 'grid-cards');
                card.style.display = 'block';
                
                card.addEventListener('click', function() {
                	  var elements = document.getElementsByClassName('sample-card');
                    for (var i = 0; i < elements.length; i++) {
                        elements[i].style.filter = "saturate(0)";
                    }
                		card.style.filter = "saturate(1)";
                    var asset = h4.textContent.split(" ");
                    balance = asset[0];
                    coin = asset[1];
                    selectedTokenId = h5.textContent;
                    selectedSerial = h6.textContent;
                    inputOwnerAttest.value = selectedAddress;
                    inputBalanceAttest.value = balance + " " + coin
                    inputSerialAttest.value = selectedSerial;
                    inputOwnerAppraise.value = selectedAddress;
                    inputBalanceAppraise.value = balance + " " + coin
                    inputSerialAppraise.value = selectedSerial;

                    selectButton.addEventListener('click', selectVault)
                    selectButton.style.backgroundColor = "orange";
                });

                const img = card.getElementsByTagName('IMG')[0]
                img.src = vault.image

                const h4 = card.getElementsByTagName('H4')[0]
                h4.textContent = vault.balance + ' ' + vault.coin;
                
                const h5 = card.getElementsByTagName('H5')[0]
                h5.textContent = vault.internalTokenId;
                
                const h6 = card.getElementsByTagName('H6')[0]
                h6.textContent = vault.serialNumber;
                
                cardContainer.appendChild(card);
              }
            })
        }
    }

    request.send();
}

async function selectVault() {
  if (event && event.preventDefault) event.preventDefault();
  selectButton.style.backgroundColor = "white";
  selectButton.style.opacity = 0.8;
  cardAttestation.style.display = "block";

  inputOwnerAttest.value = selectedAddress;
  inputBalanceAttest.value = balance + " " + coin
  inputSerialAttest.value = selectedSerial;
  inputOwnerAppraise.value = selectedAddress;
  inputBalanceAppraise.value = balance + " " + coin
  inputSerialAppraise.value = selectedSerial;

    const res = await emblemContract.methods
    .isApprovedForAll(selectedAddress, televaultAddress)
    .call();
    
    if (res == false) {
      emblemContract.methods
      .setApprovalForAll(televaultAddress, true)
      .send({ from: selectedAddress })
      .on('error', function(error){console.log("An error occurred", error)})
      .on('transactionHash', function(transactionHash) {
        console.log("Hash of the transaction: " + transactionHash)
      })
    }

    selectButton.removeEventListener('click', selectVault)
    attestButton.addEventListener('click', signAttestation)
    attestButton.style.backgroundColor = "orange";
    createButton.style.backgroundColor = "white";
    createButton.style.opacity = 0.8;
}

async function signAttestation() {
  if (event && event.preventDefault) event.preventDefault();
  //attestation to sign
  const message = "{" + selectedAddress + "," + selectedSerial + "," + balance + "," + coin + "}";

  let hashedMessage = web3.utils.sha3(message);
  
  // sign hashed message
  const signature = await window.ethereum.request({
    method: "personal_sign",
    params: [hashedMessage, selectedAddress],
  });
  inputAttestation.value = signature;

  // split signature
  attestR = signature.slice(0, 66);
  attestS = "0x" + signature.slice(66, 130);
  attestV = parseInt(signature.slice(130, 132), 16);

  cardAppraisal.style.display = 'block';
  attestButton.removeEventListener('click', signAttestation)
  appraiseButton.addEventListener('click', getAppraisal)
  appraiseButton.style.backgroundColor = "orange";
  attestButton.style.backgroundColor = "white";
  attestButton.style.opacity = 0.8;
}

function getAppraisal() {
  if (event && event.preventDefault) event.preventDefault();
  let apiUrl = new URL('https://api.televault.io/');
    
  let appraisal_request = new XMLHttpRequest();

  let url = apiUrl.toString() + 'appraise/' + selectedTokenId;

  appraisal_request.open('GET', url, true)

  appraisal_request.onload = function() {
  
  	let appraisal_signature = this.response;
    
    if (appraisal_request.status >= 200 && appraisal_request.status < 400) {
    	inputAppraisal.value = appraisal_signature;
      
      appraiseR = appraisal_signature.slice(0, 66);
  		appraiseS = "0x" + appraisal_signature.slice(66, 130);
  		appraiseV = parseInt(appraisal_signature.slice(130, 132), 16);
    }
  }
  appraisal_request.send();
  cardTelevault.style.display = "block";
  appraiseButton.removeEventListener('click', getAppraisal)
  televaultButton.addEventListener('click', televault)
  televaultButton.style.backgroundColor = "orange";
  appraiseButton.style.backgroundColor = "white";
  appraiseButton.style.opacity = 0.8;
}

async function televault() {
  
  televaultContract.methods
  .televault(selectedSerial, coin, attestV, attestR, attestS, appraiseV, appraiseR, appraiseS)
  .send({ from: selectedAddress })
  .on('error', function(error){console.log("An error occurred", error)})
  .once('sending', function(){
    console.log("sending")

    let refresh_request = new XMLHttpRequest();

    apiUrl = new URL('https://api.televault.io/');
    
    let url = apiUrl.toString() + 'refresh/' + selectedTokenId;
    
    refresh_request.open('GET', url, true)

    refresh_request.onload = function() {
      let refresh_response = this.response;
      console.log(refresh_response);
    }
    
    refresh_request.send();
  })
  .on('transactionHash', function(transactionHash) {
    console.log("Hash of the transaction: " + transactionHash)
    cardComplete.style.display = "block";
    televaultButton.removeEventListener('click', televault)
    addWalletButton.addEventListener('click', addToWallet)
    restartButton.addEventListener('click', restartBridge)
    televaultButton.style.backgroundColor = "white";
    televaultButton.style.opacity = 0.8;
  })
  
}

async function addToWallet() {
  const tokenAddress = "0x38FB3406532398Bc3ec391b5eBEB833cc4c89d58"
  const tokenSymbol = "vBELLS"
  const tokenDecimals = 18
  const tokenImage = "https://cdn.prod.website-files.com/66e67a4cc40e1bbd3ff60b7c/670bd98aeccd37f1aa553a16_BEL%20LOGO-p-130x130q80.png"

  try {
    // 'wasAdded' is a boolean. Like any RPC method, an error can be thrown.
    const wasAdded = await window.ethereum // Or window.ethereum if you don't support EIP-6963.
      .request({
        method: "wallet_watchAsset",
        params: {
          type: "ERC20",
          options: {
            // The address of the token.
            address: tokenAddress,
            // A ticker symbol or shorthand, up to 5 characters.
            symbol: tokenSymbol,
            // The number of decimals in the token.
            decimals: tokenDecimals,
            // A string URL of the token logo.
            image: tokenImage,
          },
        },
      })

    if (wasAdded) {
      console.log("Thanks for your interest!")
    } else {
      console.log("Your loss!")
    }
  } catch (error) {
    console.log(error)
  }

}

function restartBridge() {
  prevSerial = selectedSerial

  vaultsButton.addEventListener('click', getVaults)
  vaultsButton.style.display = "inline-block";
  selectButton.style.display = "none";
  createButton.style.display = "none";

  vaultsButton.style.opacity = 1;
  selectButton.style.opacity = 1;
  createButton.style.opacity = 1;
  attestButton.style.opacity = 1;
  appraiseButton.style.opacity = 1;
  televaultButton.style.opacity = 1;

  inputOwnerAttest.value = "";
  inputBalanceAttest.value = "";
  inputSerialAttest.value = "";
  inputOwnerAppraise.value = "";
  inputBalanceAppraise.value = "";
  inputSerialAppraise.value = "";
  inputAttestation.value = "";
  inputAttestation.value = "";

  cardAttestation.style.display = "none";
  cardAppraisal.style.display = "none";
  cardTelevault.style.display = "none";
  cardComplete.style.display = "none";
  cardContainer.style.display = "none";
  gridCards.style.display = "none";
}
</script></body></html>